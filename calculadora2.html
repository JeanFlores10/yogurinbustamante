<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de Rentabilidad - Yogurt Artesanal</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&family=Poppins:wght@300;400;500&display=swap"  rel="preload" as="style">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" media="print" onload="this.media='all'">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #f9f7fe 0%, #e3f2fd 100%);
            color: #333;
            line-height: 1.6;
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            padding: 30px 0;
            background: linear-gradient(120deg, #6a11cb 0%, #2575fc 100%);
            color: white;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        
        header h1 {
            font-family: 'Montserrat', sans-serif;
            font-weight: 700;
            font-size: 2.8rem;
            margin-bottom: 10px;
        }
        
        header p {
            font-size: 1.2rem;
            max-width: 800px;
            margin: 0 auto;
            opacity: 0.9;
        }
        
        .logo {
            font-size: 3rem;
            margin-bottom: 15px;
            color: #ffd166;
        }
        
        .dashboard {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            margin-bottom: 30px;
        }
        
        @media (max-width: 768px) {
            .dashboard {
                grid-template-columns: 1fr;
            }
        }
        
        .card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }
        
        .card h2 {
            font-family: 'Montserrat', sans-serif;
            color: #2d3748;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #e2e8f0;
            display: flex;
            align-items: center;
        }
        
        .card h2 i {
            margin-right: 12px;
            color: #4a6cf7;
        }
        
        .input-group {
            margin-bottom: 20px;
        }
        
        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #4a5568;
        }
        
        .input-group input, .input-group select {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #cbd5e0;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }
        
        .input-group input:focus, .input-group select:focus {
            outline: none;
            border-color: #4a6cf7;
            box-shadow: 0 0 0 3px rgba(74, 108, 247, 0.1);
        }
        
        .btn {
            background: linear-gradient(120deg, #6a11cb 0%, #2575fc 100%);
            color: white;
            border: none;
            padding: 14px 25px;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            display: block;
            width: 100%;
            margin-top: 20px;
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 7px 15px rgba(37, 117, 252, 0.3);
        }
        
        .results {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            margin-top: 30px;
        }
        
        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .result-card {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            border-left: 4px solid #4a6cf7;
        }
        
        .result-card h3 {
            font-size: 1.1rem;
            color: #4a5568;
            margin-bottom: 10px;
        }
        
        .result-card .value {
            font-size: 2rem;
            font-weight: 700;
            color: #2d3748;
            font-family: 'Montserrat', sans-serif;
        }
        
        .positive {
            color: #10b981 !important;
        }
        
        .negative {
            color: #ef4444 !important;
        }
        
        .charts-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            margin-top: 30px;
        }
        
        @media (max-width: 992px) {
            .charts-container {
                grid-template-columns: 1fr;
            }
        }
        
        .chart-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }
        
        .chart-container {
            height: 300px;
            position: relative;
        }
        
        .product-cards {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }
        
        .product-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            border-top: 4px solid #4a6cf7;
        }
        
        .product-card h3 {
            font-family: 'Montserrat', sans-serif;
            color: #2d3748;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
        }
        
        .product-card h3 i {
            margin-right: 10px;
            color: #4a6cf7;
        }
        
        .product-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 15px;
        }
        
        .stat {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 12px;
        }
        
        .stat .label {
            font-size: 0.9rem;
            color: #4a5568;
        }
        
        .stat .val {
            font-size: 1.3rem;
            font-weight: 600;
            color: #2d3748;
            font-family: 'Montserrat', sans-serif;
        }
        
        .profit {
            color: #10b981;
        }
        
        .footer {
            text-align: center;
            margin-top: 40px;
            padding: 20px;
            color: #4a5568;
            font-size: 0.9rem;
        }
        
        .tab-container {
            margin-top: 30px;
        }
        
        .tabs {
            display: flex;
            background: white;
            border-radius: 12px 12px 0 0;
            overflow: hidden;
        }
        
        .tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            background: #edf2f7;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s;
        }
        
        .tab.active {
            background: #4a6cf7;
            color: white;
        }
        
        .tab-content {
            background: white;
            padding: 25px;
            border-radius: 0 0 12px 12px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }
        
        .tab-pane {
            display: none;
        }
        
        .tab-pane.active {
            display: block;
        }
        
        .product-details {
            margin-top: 20px;
        }
        
        .product-details h4 {
            color: #4a6cf7;
            margin-bottom: 10px;
            padding-bottom: 5px;
            border-bottom: 1px solid #e2e8f0;
        }
        
        .product-details ul {
            padding-left: 20px;
            margin-bottom: 15px;
        }
        
        .product-details li {
            margin-bottom: 8px;
        }
        
        .highlight {
            background: linear-gradient(120deg, rgba(106, 17, 203, 0.1) 0%, rgba(37, 117, 252, 0.1) 100%);
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 4px solid #4a6cf7;
        }
        
        .summary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .summary-item {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
        }
        
        .summary-item .label {
            font-size: 0.9rem;
            color: #4a5568;
        }
        
        .summary-item .value {
            font-size: 1.4rem;
            font-weight: 700;
            color: #2d3748;
            font-family: 'Montserrat', sans-serif;
            margin-top: 5px;
        }
    </style>
	    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #f9f7fe 0%, #e3f2fd 100%);
            color: #333;
            line-height: 1.6;
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            padding: 30px 0;
            background: linear-gradient(120deg, #6a11cb 0%, #2575fc 100%);
            color: white;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        
        header h1 {
            font-family: 'Montserrat', sans-serif;
            font-weight: 700;
            font-size: 2.8rem;
            margin-bottom: 10px;
        }
        
        header p {
            font-size: 1.2rem;
            max-width: 800px;
            margin: 0 auto;
            opacity: 0.9;
        }
        
        .logo {
            font-size: 3rem;
            margin-bottom: 15px;
            color: #ffd166;
        }
        
        .dashboard {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            margin-bottom: 30px;
        }
        
        @media (max-width: 768px) {
            .dashboard {
                grid-template-columns: 1fr;
            }
        }
        
        .card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }
        
        .card h2 {
            font-family: 'Montserrat', sans-serif;
            color: #2d3748;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #e2e8f0;
            display: flex;
            align-items: center;
        }
        
        .card h2 i {
            margin-right: 12px;
            color: #4a6cf7;
        }
        
        .input-group {
            margin-bottom: 20px;
        }
        
        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #4a5568;
        }
        
        .input-group input, .input-group select {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #cbd5e0;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }
        
        .input-group input:focus, .input-group select:focus {
            outline: none;
            border-color: #4a6cf7;
            box-shadow: 0 0 0 3px rgba(74, 108, 247, 0.1);
        }
        
        .btn {
            background: linear-gradient(120deg, #6a11cb 0%, #2575fc 100%);
            color: white;
            border: none;
            padding: 14px 25px;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            display: block;
            width: 100%;
            margin-top: 20px;
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 7px 15px rgba(37, 117, 252, 0.3);
        }
        
        .btn-secondary {
            background: #e2e8f0;
            color: #4a5568;
        }
        
        .btn-secondary:hover {
            box-shadow: 0 7px 15px rgba(0,0,0,0.1);
        }
        
        .results {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            margin-top: 30px;
        }
        
        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .result-card {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            border-left: 4px solid #4a6cf7;
        }
        
        .result-card h3 {
            font-size: 1.1rem;
            color: #4a5568;
            margin-bottom: 10px;
        }
        
        .result-card .value {
            font-size: 2rem;
            font-weight: 700;
            color: #2d3748;
            font-family: 'Montserrat', sans-serif;
        }
        
        .positive {
            color: #10b981 !important;
        }
        
        .negative {
            color: #ef4444 !important;
        }
        
        .charts-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            margin-top: 30px;
        }
        
        @media (max-width: 992px) {
            .charts-container {
                grid-template-columns: 1fr;
            }
        }
        
        .chart-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }
        
        .chart-container {
            height: 300px;
            position: relative;
        }
        
        .product-cards {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }
        
        .product-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            border-top: 4px solid #4a6cf7;
        }
        
        .product-card h3 {
            font-family: 'Montserrat', sans-serif;
            color: #2d3748;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
        }
        
        .product-card h3 i {
            margin-right: 10px;
            color: #4a6cf7;
        }
        
        .product-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 15px;
        }
        
        .stat {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 12px;
        }
        
        .stat .label {
            font-size: 0.9rem;
            color: #4a5568;
        }
        
        .stat .val {
            font-size: 1.3rem;
            font-weight: 600;
            color: #2d3748;
            font-family: 'Montserrat', sans-serif;
        }
        
        .profit {
            color: #10b981;
        }
        
        .footer {
            text-align: center;
            margin-top: 40px;
            padding: 20px;
            color: #4a5568;
            font-size: 0.9rem;
        }
        
        .tab-container {
            margin-top: 30px;
        }
        
        .tabs {
            display: flex;
            background: white;
            border-radius: 12px 12px 0 0;
            overflow: hidden;
        }
        
        .tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            background: #edf2f7;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s;
        }
        
        .tab.active {
            background: #4a6cf7;
            color: white;
        }
        
        .tab-content {
            background: white;
            padding: 25px;
            border-radius: 0 0 12px 12px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }
        
        .tab-pane {
            display: none;
        }
        
        .tab-pane.active {
            display: block;
        }
        
        .product-details {
            margin-top: 20px;
        }
        
        .product-details h4 {
            color: #4a6cf7;
            margin-bottom: 10px;
            padding-bottom: 5px;
            border-bottom: 1px solid #e2e8f0;
        }
        
        .product-details ul {
            padding-left: 20px;
            margin-bottom: 15px;
        }
        
        .product-details li {
            margin-bottom: 8px;
        }
        
        .highlight {
            background: linear-gradient(120deg, rgba(106, 17, 203, 0.1) 0%, rgba(37, 117, 252, 0.1) 100%);
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 4px solid #4a6cf7;
        }
        
        .summary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .summary-item {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
        }
        
        .summary-item .label {
            font-size: 0.9rem;
            color: #4a5568;
        }
        
        .summary-item .value {
            font-size: 1.4rem;
            font-weight: 700;
            color: #2d3748;
            font-family: 'Montserrat', sans-serif;
            margin-top: 5px;
        }
        
        /* Nuevos estilos para sabores y envases */
        .flavor-container {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
        }
        
        .flavor-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .flavor-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }
        
        .flavor-distribution {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .flavor-distribution input {
            width: 80px;
        }
        
        .package-options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 15px;
        }
        
        .package-option {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .flavor-list {
            margin-top: 20px;
        }
        
        .sabor-tag {
            display: inline-block;
            background: #e9ecef;
            padding: 5px 10px;
            border-radius: 20px;
            margin: 0 5px 5px 0;
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <i class="fas fa-blender"></i>
            </div>
            <h1>Calculadora de Rentabilidad</h1>
            <p>Herramienta para optimizar tu producción de yogurt artesanal</p>
        </header>
        
        <div class="dashboard">
            <div class="card">
                <h2><i class="fas fa-cogs"></i> Parámetros Básicos</h2>
                
                <div class="input-group">
                    <label for="yogurt-cost">Costo del yogurt por litro (S/)</label>
                    <input type="number" id="yogurt-cost" step="0.1" min="0" value="8.00">
                </div>
                
                <div class="input-group">
                    <label for="weekly-production">Producción semanal total (litros)</label>
                    <input type="number" id="weekly-production" min="1" value="20">
                </div>
                
                <div class="flavor-list">
                    <h3 style="margin-bottom: 15px; color: #4a6cf7;">Sabores de Fruta</h3>
                    <div id="flavors-container">
                        <div class="flavor-container" data-flavor="mango">
                            <div class="flavor-header">
                                <h4>Mango</h4>
                                <button class="btn-secondary remove-flavor" style="padding: 5px 10px; font-size: 0.8rem;">Eliminar</button>
                            </div>
                            <div class="flavor-content">
                                <div class="input-group">
                                    <label for="mango-percentage">Distribución (%)</label>
                                    <input type="number" class="flavor-percentage" id="mango-percentage" min="0" max="100" value="40">
                                </div>
                                <div class="input-group">
                                    <label for="mango-cost">Costo extra por unidad (S/)</label>
                                    <input type="number" class="flavor-cost" id="mango-cost" step="0.01" min="0" value="0.20">
                                </div>
                            </div>
                        </div>
                        <div class="flavor-container" data-flavor="fresa">
                            <div class="flavor-header">
                                <h4>Fresa</h4>
                                <button class="btn-secondary remove-flavor" style="padding: 5px 10px; font-size: 0.8rem;">Eliminar</button>
                            </div>
                            <div class="flavor-content">
                                <div class="input-group">
                                    <label for="fresa-percentage">Distribución (%)</label>
                                    <input type="number" class="flavor-percentage" id="fresa-percentage" min="0" max="100" value="30">
                                </div>
                                <div class="input-group">
                                    <label for="fresa-cost">Costo extra por unidad (S/)</label>
                                    <input type="number" class="flavor-cost" id="fresa-cost" step="0.01" min="0" value="0.25">
                                </div>
                            </div>
                        </div>
                        <div class="flavor-container" data-flavor="durazno">
                            <div class="flavor-header">
                                <h4>Durazno</h4>
                                <button class="btn-secondary remove-flavor" style="padding: 5px 10px; font-size: 0.8rem;">Eliminar</button>
                            </div>
                            <div class="flavor-content">
                                <div class="input-group">
                                    <label for="durazno-percentage">Distribución (%)</label>
                                    <input type="number" class="flavor-percentage" id="durazno-percentage" min="0" max="100" value="30">
                                </div>
                                <div class="input-group">
                                    <label for="durazno-cost">Costo extra por unidad (S/)</label>
                                    <input type="number" class="flavor-cost" id="durazno-cost" step="0.01" min="0" value="0.18">
                                </div>
                            </div>
                        </div>
                    </div>
                    <button id="add-flavor" class="btn-secondary" style="margin-top: 15px; width: auto; display: inline-flex; align-items: center;">
                        <i class="fas fa-plus" style="margin-right: 8px;"></i> Añadir Sabor
                    </button>
                </div>
            </div>
            
            <div class="card">
                <h2><i class="fas fa-chart-pie"></i> Distribución de Producción</h2>
                
                <div class="input-group">
                    <label for="parfait-liters">Parfait (litros)</label>
                    <input type="number" id="parfait-liters" min="0" value="5">
                    <div class="package-options">
                        <label class="package-option">
                            <input type="radio" name="parfait-package" value="7oz" checked> 7oz (S/0.50)
                        </label>
                        <label class="package-option">
                            <input type="radio" name="parfait-package" value="10oz"> 10oz (S/0.65)
                        </label>
                        <label class="package-option">
                            <input type="radio" name="parfait-package" value="12oz"> 12oz (S/0.80)
                        </label>
                    </div>
                </div>
                
                <div class="input-group">
                    <label for="bebible-liters">Yogurt Bebible (litros)</label>
                    <input type="number" id="bebible-liters" min="0" value="5">
                    <div class="package-options">
                        <label class="package-option">
                            <input type="radio" name="bebible-package" value="7oz" checked> 7oz (S/0.55)
                        </label>
                        <label class="package-option">
                            <input type="radio" name="bebible-package" value="10oz"> 10oz (S/0.70)
                        </label>
                        <label class="package-option">
                            <input type="radio" name="bebible-package" value="12oz"> 12oz (S/0.85)
                        </label>
                    </div>
                </div>
                
                <div class="input-group">
                    <label for="paletas-liters">Paletas (litros)</label>
                    <input type="number" id="paletas-liters" min="0" value="3">
                </div>
                
                <div class="input-group">
                    <label for="barritas-liters">Barritas (litros)</label>
                    <input type="number" id="barritas-liters" min="0" value="3">
                </div>
                
                <button id="calculate-btn" class="btn">Calcular Rentabilidad</button>
            </div>
        </div>
        
        <div class="results">
            <h2><i class="fas fa-chart-line"></i> Resultados Semanales</h2>
            
            <div class="results-grid">
                <div class="result-card">
                    <h3>Ingresos Totales</h3>
                    <div class="value" id="total-income">S/ 715.00</div>
                </div>
                
                <div class="result-card">
                    <h3>Costos Totales</h3>
                    <div class="value" id="total-cost">S/ 309.52</div>
                </div>
                
                <div class="result-card">
                    <h3>Ganancia Neta</h3>
                    <div class="value positive" id="net-profit">S/ 405.48</div>
                </div>
                
                <div class="result-card">
                    <h3>Margen de Ganancia</h3>
                    <div class="value positive" id="profit-margin">56.71%</div>
                </div>
            </div>
            
            <div class="charts-container">
                <div class="chart-card">
                    <h3>Distribución de Ingresos</h3>
                    <div class="chart-container">
                        <canvas id="income-chart"></canvas>
                    </div>
                </div>
                
                <div class="chart-card">
                    <h3>Rentabilidad por Producto</h3>
                    <div class="chart-container">
                        <canvas id="profit-chart"></canvas>
                    </div>
                </div>
            </div>
            
            <h2 style="margin-top: 30px;"><i class="fas fa-box-open"></i> Rentabilidad por Producto</h2>
            
            <div class="product-cards">
                <div class="product-card">
                    <h3><i class="fas fa-glass-whiskey"></i> Parfait</h3>
                    <div class="product-stats">
                        <div class="stat">
                            <div class="label">Unidades</div>
                            <div class="val" id="parfait-units">20</div>
                        </div>
                        <div class="stat">
                            <div class="label">Ingresos</div>
                            <div class="val" id="parfait-income">S/ 180.00</div>
                        </div>
                        <div class="stat">
                            <div class="label">Costos</div>
                            <div class="val" id="parfait-cost">S/ 82.00</div>
                        </div>
                        <div class="stat">
                            <div class="label">Ganancia</div>
                            <div class="val profit" id="parfait-profit">S/ 98.00</div>
                        </div>
                    </div>
                    <div class="flavor-distribution">
                        <span class="sabor-tag">Mango: 8 uds.</span>
                        <span class="sabor-tag">Fresa: 6 uds.</span>
                        <span class="sabor-tag">Durazno: 6 uds.</span>
                    </div>
                </div>
                
                <div class="product-card">
                    <h3><i class="fas fa-wine-bottle"></i> Yogurt Bebible</h3>
                    <div class="product-stats">
                        <div class="stat">
                            <div class="label">Unidades</div>
                            <div class="val" id="bebible-units">20</div>
                        </div>
                        <div class="stat">
                            <div class="label">Ingresos</div>
                            <div class="val" id="bebible-income">S/ 160.00</div>
                        </div>
                        <div class="stat">
                            <div class="label">Costos</div>
                            <div class="val" id="bebible-cost">S/ 62.00</div>
                        </div>
                        <div class="stat">
                            <div class="label">Ganancia</div>
                            <div class="val profit" id="bebible-profit">S/ 98.00</div>
                        </div>
                    </div>
                    <div class="flavor-distribution">
                        <span class="sabor-tag">Mango: 8 uds.</span>
                        <span class="sabor-tag">Fresa: 6 uds.</span>
                        <span class="sabor-tag">Durazno: 6 uds.</span>
                    </div>
                </div>
                
                <div class="product-card">
                    <h3><i class="fas fa-ice-cream"></i> Paletas</h3>
                    <div class="product-stats">
                        <div class="stat">
                            <div class="label">Unidades</div>
                            <div class="val" id="paletas-units">30</div>
                        </div>
                        <div class="stat">
                            <div class="label">Ingresos</div>
                            <div class="val" id="paletas-income">S/ 105.00</div>
                        </div>
                        <div class="stat">
                            <div class="label">Costos</div>
                            <div class="val" id="paletas-cost">S/ 42.00</div>
                        </div>
                        <div class="stat">
                            <div class="label">Ganancia</div>
                            <div class="val profit" id="paletas-profit">S/ 63.00</div>
                        </div>
                    </div>
                    <div class="flavor-distribution">
                        <span class="sabor-tag">Mango: 12 uds.</span>
                        <span class="sabor-tag">Fresa: 9 uds.</span>
                        <span class="sabor-tag">Durazno: 9 uds.</span>
                    </div>
                </div>
                
                <div class="product-card">
                    <h3><i class="fas fa-cookie-bite"></i> Barritas</h3>
                    <div class="product-stats">
                        <div class="stat">
                            <div class="label">Unidades</div>
                            <div class="val" id="barritas-units">36</div>
                        </div>
                        <div class="stat">
                            <div class="label">Ingresos</div>
                            <div class="val" id="barritas-income">S/ 126.00</div>
                        </div>
                        <div class="stat">
                            <div class="label">Costos</div>
                            <div class="val" id="barritas-cost">S/ 54.72</div>
                        </div>
                        <div class="stat">
                            <div class="label">Ganancia</div>
                            <div class="val profit" id="barritas-profit">S/ 71.28</div>
                        </div>
                    </div>
                    <div class="flavor-distribution">
                        <span class="sabor-tag">Mango: 14 uds.</span>
                        <span class="sabor-tag">Fresa: 11 uds.</span>
                        <span class="sabor-tag">Durazno: 11 uds.</span>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="tab-container">
            <div class="tabs">
                <div class="tab active" data-tab="costos">Detalles de Costos</div>
                <div class="tab" data-tab="recomendaciones">Recomendaciones</div>
                <div class="tab" data-tab="inversion">Inversión Inicial</div>
            </div>
            
            <div class="tab-content">
                <div class="tab-pane active" id="costos">
                    <h3>Costos Detallados por Producto</h3>
                    
                    <div class="product-details">
                        <h4>Parfait (250 ml)</h4>
                        <ul>
                            <li><strong>Yogurt:</strong> S/ 2.00 (0.25L a S/8.00/L)</li>
                            <li><strong>Fruta:</strong> S/ 0.80 (50g)</li>
                            <li><strong>Granola:</strong> S/ 0.60 (30g)</li>
                            <li><strong>Envase (7oz):</strong> S/ 0.50 (vaso + tapa)</li>
                            <li><strong>Misceláneos:</strong> S/ 0.10</li>
                        </ul>
                        <div class="highlight">
                            <strong>Costo total por unidad:</strong> S/ 4.00
                        </div>
                    </div>
                    
                    <div class="product-details">
                        <h4>Yogurt Bebible (250 ml)</h4>
                        <ul>
                            <li><strong>Yogurt:</strong> S/ 2.00</li>
                            <li><strong>Envase (7oz):</strong> S/ 0.55 (botella + tapa)</li>
                            <li><strong>Pulpa de fruta:</strong> S/ 0.30</li>
                            <li><strong>Endulzante:</strong> S/ 0.05</li>
                            <li><strong>Etiqueta:</strong> S/ 0.15</li>
                        </ul>
                        <div class="highlight">
                            <strong>Costo total por unidad:</strong> S/ 3.05
                        </div>
                    </div>
                    
                    <div class="product-details">
                        <h4>Paletas Heladas (100 ml)</h4>
                        <ul>
                            <li><strong>Yogurt:</strong> S/ 0.80 (0.10L)</li>
                            <li><strong>Molde + envoltorio:</strong> S/ 0.30</li>
                            <li><strong>Fruta:</strong> S/ 0.15</li>
                            <li><strong>Misceláneos:</strong> S/ 0.15 (electricidad)</li>
                        </ul>
                        <div class="highlight">
                            <strong>Costo total por unidad:</strong> S/ 1.40
                        </div>
                    </div>
                    
                    <div class="product-details">
                        <h4>Barritas Frías</h4>
                        <ul>
                            <li><strong>Yogurt:</strong> S/ 0.67 (83ml)</li>
                            <li><strong>Avena, miel, frutos secos:</strong> S/ 0.45</li>
                            <li><strong>Cobertura de chocolate:</strong> S/ 0.20</li>
                            <li><strong>Envoltorio:</strong> S/ 0.20</li>
                        </ul>
                        <div class="highlight">
                            <strong>Costo total por unidad:</strong> S/ 1.52
                        </div>
                    </div>
                </div>
                
                <div class="tab-pane" id="recomendaciones">
                    <h3>Estrategias para Mejorar Rentabilidad</h3>
                    
                    <div class="highlight">
                        <h4>Optimización de Costos</h4>
                        <ul>
                            <li><strong>Compras a granel:</strong> Fruta, granola y envases con descuentos por volumen</li>
                            <li><strong>Envases retornables:</strong> Sistema de depósito para botellas de vidrio</li>
                            <li><strong>Fruta de temporada:</strong> Utilizar frutas locales en temporada alta</li>
                        </ul>
                    </div>
                    
                    <div class="highlight">
                        <h4>Aumento de Ventas</h4>
                        <ul>
                            <li><strong>Combos:</strong> "Snack Pack" con yogurt + barrita + paleta</li>
                            <li><strong>Contratos B2B:</strong> Oficinas y gimnasios con pedidos semanales</li>
                            <li><strong>Toppings premium:</strong> Frutos secos, chocolate gourmet, miel artesanal</li>
                        </ul>
                    </div>
                    
                    <div class="highlight">
                        <h4>Gestión de Inventario</h4>
                        <ul>
                            <li><strong>Paletas como stock buffer:</strong> Larga vida útil permite producción anticipada</li>
                            <li><strong>FIFO estricto:</strong> Primero en entrar, primero en salir</li>
                            <li><strong>Producción just-in-time:</strong> Para productos perecederos (parfaits)</li>
                        </ul>
                    </div>
                    
                    <h3 style="margin-top: 25px;">Vida Útil y Conservación</h3>
                    <div class="summary-grid">
                        <div class="summary-item">
                            <div class="label">Parfaits</div>
                            <div class="value">48-72h</div>
                            <div class="label">4°C</div>
                        </div>
                        <div class="summary-item">
                            <div class="label">Yogurt Bebible</div>
                            <div class="value">48-72h</div>
                            <div class="label">4°C</div>
                        </div>
                        <div class="summary-item">
                            <div class="label">Paletas</div>
                            <div class="value">3 meses</div>
                            <div class="label">-18°C</div>
                        </div>
                        <div class="summary-item">
                            <div class="label">Barritas</div>
                            <div class="value">5-7 días</div>
                            <div class="label">4°C</div>
                        </div>
                    </div>
                </div>
                
                <div class="tab-pane" id="inversion">
                    <h3>Inversión Inicial Estimada</h3>
                    
                    <div class="highlight">
                        <h4>Inversión Operativa (Primera Semana)</h4>
                        <ul>
                            <li><strong>Ingredientes + envases:</strong> S/ 310.00</li>
                            <li><strong>Caja de emergencias:</strong> S/ 40.00</li>
                        </ul>
                        <div style="margin-top: 10px; font-weight: bold;">
                            Total operativo: S/ 350.00
                        </div>
                    </div>
                    
                    <div class="highlight">
                        <h4>Equipamiento (Inversión Única)</h4>
                        <ul>
                            <li><strong>Congeladora comercial:</strong> S/ 1,200 - S/ 2,500</li>
                            <li><strong>Licuadora industrial:</strong> S/ 250 - S/ 600</li>
                            <li><strong>Moldes para paletas:</strong> S/ 50 - S/ 200</li>
                            <li><strong>Refrigerador:</strong> S/ 800 - S/ 1,500</li>
                            <li><strong>Utensilios varios:</strong> S/ 100 - S/ 300</li>
                        </ul>
                        <div style="margin-top: 10px; font-weight: bold;">
                            Total equipamiento: S/ 2,400 - S/ 5,100
                        </div>
                    </div>
                    
                    <div class="highlight">
                        <h4>Punto de Equilibrio</h4>
                        <p>Considerando solo costos variables (ingredientes y envases):</p>
                        <ul>
                            <li><strong>Costos fijos semanales:</strong> S/ 150 (transporte, marketing, servicios)</li>
                            <li><strong>Margen promedio por unidad:</strong> S/ 3.50</li>
                            <li><strong>Punto de equilibrio:</strong> 43 unidades por semana</li>
                        </ul>
                        <div style="margin-top: 10px; font-weight: bold;">
                            Con 86 unidades semanales, cubres inversión inicial en 3 meses
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="footer">
            <p>© 2023 Calculadora de Rentabilidad para Yogurt Artesanal | Desarrollado para emprendedores</p>
        </div>
    </div>
    
    <script>
	
        // Datos iniciales
        const products = {
            parfait: {
                name: 'Parfait Express',
                unitsPerLiter: 4,
                sellingPrice: 9.00,
                costs: {
                    yogurt: 2.00,
                    fruit: 0.80,
                    granola: 0.60,
                    packaging: 0.60,
                    misc: 0.10
                },
                liters: 5
            },
            mango: {
                name: 'Mango Parfait',
                unitsPerLiter: 4,
                sellingPrice: 9.00,
                costs: {
                    yogurt: 2.00,
                    fruit: 1.00,
                    granola: 0.60,
                    packaging: 0.60,
                    misc: 0.10
                },
                liters: 4
            },
            bebible: {
                name: 'Yogurt Bebible',
                unitsPerLiter: 4,
                sellingPriceNatural: 8.00,
                sellingPriceFlavored: 9.00,
                costs: {
                    yogurt: 2.00,
                    packaging: 0.60,
                    fruit: 0.30,
                    sweetener: 0.05,
                    label: 0.15
                },
                liters: 5,
                flavoredPercentage: 50
            },
            paletas: {
                name: 'Paletas',
                unitsPerLiter: 10,
                sellingPrice: 3.50,
                costs: {
                    yogurt: 0.80,
                    packaging: 0.30,
                    fruit: 0.15,
                    misc: 0.15
                },
                liters: 3
            },
            barritas: {
                name: 'Barritas',
                unitsPerLiter: 12,
                sellingPrice: 3.50,
                costs: {
                    yogurt: 0.67,
                    mix: 0.45,
                    chocolate: 0.20,
                    packaging: 0.20
                },
                liters: 3
            }
        };
        
        // Inicializar gráficos
        const incomeChart = new Chart(document.getElementById('income-chart'), {
            type: 'doughnut',
            data: {
                labels: [
                    'Parfait Express', 
                    'Mango Parfait', 
                    'Yogurt Bebible', 
                    'Paletas', 
                    'Barritas'
                ],
                datasets: [{
                    data: [180, 144, 160, 105, 126],
                    backgroundColor: [
                        '#4a6cf7',
                        '#6a11cb',
                        '#2575fc',
                        '#8f44fd',
                        '#3b8ffc'
                    ]
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'right'
                    }
                }
            }
        });
        
        const profitChart = new Chart(document.getElementById('profit-chart'), {
            type: 'bar',
            data: {
                labels: [
                    'Parfait Express', 
                    'Mango Parfait', 
                    'Yogurt Bebible', 
                    'Paletas', 
                    'Barritas'
                ],
                datasets: [{
                    label: 'Ganancia por Producto (S/)',
                    data: [98, 75.2, 98, 63, 71.28],
                    backgroundColor: '#10b981'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });
        
        // Funciones de cálculo
        function calculateUnitCost(product) {
            let cost = 0;
            for (const key in product.costs) {
                cost += product.costs[key];
            }
            return cost;
        }
        
        function calculateProductProfit(product) {
            const unitCost = calculateUnitCost(product);
            let units = product.liters * product.unitsPerLiter;
            let revenue, cost;
            
            if (product.name === 'Yogurt Bebible') {
                const naturalUnits = units * (1 - product.flavoredPercentage/100);
                const flavoredUnits = units * (product.flavoredPercentage/100);
                
                revenue = (naturalUnits * product.sellingPriceNatural) + 
                          (flavoredUnits * product.sellingPriceFlavored);
            } else {
                revenue = units * product.sellingPrice;
            }
            
            cost = units * unitCost;
            return {
                units: Math.round(units),
                revenue: revenue,
                cost: cost,
                profit: revenue - cost
            };
        }
        
        function calculateTotals() {
            const results = {};
            let totalRevenue = 0;
            let totalCost = 0;
            
            for (const key in products) {
                results[key] = calculateProductProfit(products[key]);
                totalRevenue += results[key].revenue;
                totalCost += results[key].cost;
            }
            
            return {
                details: results,
                totalRevenue: totalRevenue,
                totalCost: totalCost,
                netProfit: totalRevenue - totalCost,
                profitMargin: ((totalRevenue - totalCost) / totalRevenue) * 100
            };
        }
        
        // Actualizar datos en la página
        function updateUI() {
            const totals = calculateTotals();
            
            // Actualizar resumen
            document.getElementById('total-income').textContent = `S/ ${totals.totalRevenue.toFixed(2)}`;
            document.getElementById('total-cost').textContent = `S/ ${totals.totalCost.toFixed(2)}`;
            document.getElementById('net-profit').textContent = `S/ ${totals.netProfit.toFixed(2)}`;
            document.getElementById('profit-margin').textContent = `${totals.profitMargin.toFixed(2)}%`;
            
            // Actualizar por producto
            document.getElementById('parfait-units').textContent = totals.details.parfait.units;
            document.getElementById('parfait-income').textContent = `S/ ${totals.details.parfait.revenue.toFixed(2)}`;
            document.getElementById('parfait-cost').textContent = `S/ ${totals.details.parfait.cost.toFixed(2)}`;
            document.getElementById('parfait-profit').textContent = `S/ ${totals.details.parfait.profit.toFixed(2)}`;
            
            document.getElementById('mango-units').textContent = totals.details.mango.units;
            document.getElementById('mango-income').textContent = `S/ ${totals.details.mango.revenue.toFixed(2)}`;
            document.getElementById('mango-cost').textContent = `S/ ${totals.details.mango.cost.toFixed(2)}`;
            document.getElementById('mango-profit').textContent = `S/ ${totals.details.mango.profit.toFixed(2)}`;
            
            document.getElementById('bebible-units').textContent = totals.details.bebible.units;
            document.getElementById('bebible-income').textContent = `S/ ${totals.details.bebible.revenue.toFixed(2)}`;
            document.getElementById('bebible-cost').textContent = `S/ ${totals.details.bebible.cost.toFixed(2)}`;
            document.getElementById('bebible-profit').textContent = `S/ ${totals.details.bebible.profit.toFixed(2)}`;
            
            document.getElementById('paletas-units').textContent = totals.details.paletas.units;
            document.getElementById('paletas-income').textContent = `S/ ${totals.details.paletas.revenue.toFixed(2)}`;
            document.getElementById('paletas-cost').textContent = `S/ ${totals.details.paletas.cost.toFixed(2)}`;
            document.getElementById('paletas-profit').textContent = `S/ ${totals.details.paletas.profit.toFixed(2)}`;
            
            document.getElementById('barritas-units').textContent = totals.details.barritas.units;
            document.getElementById('barritas-income').textContent = `S/ ${totals.details.barritas.revenue.toFixed(2)}`;
            document.getElementById('barritas-cost').textContent = `S/ ${totals.details.barritas.cost.toFixed(2)}`;
            document.getElementById('barritas-profit').textContent = `S/ ${totals.details.barritas.profit.toFixed(2)}`;
            
            // Actualizar gráficos
            incomeChart.data.datasets[0].data = [
                totals.details.parfait.revenue,
                totals.details.mango.revenue,
                totals.details.bebible.revenue,
                totals.details.paletas.revenue,
                totals.details.barritas.revenue
            ];
            incomeChart.update();
            
            profitChart.data.datasets[0].data = [
                totals.details.parfait.profit,
                totals.details.mango.profit,
                totals.details.bebible.profit,
                totals.details.paletas.profit,
                totals.details.barritas.profit
            ];
            profitChart.update();
        }
        
        // Manejar cambios en los inputs
        document.getElementById('calculate-btn').addEventListener('click', function() {
            // Actualizar costos base
            const yogurtCost = parseFloat(document.getElementById('yogurt-cost').value);
            
            products.parfait.costs.yogurt = yogurtCost * 0.25;
            products.mango.costs.yogurt = yogurtCost * 0.25;
            products.bebible.costs.yogurt = yogurtCost * 0.25;
            products.paletas.costs.yogurt = yogurtCost * 0.1;
            products.barritas.costs.yogurt = yogurtCost / 12;
            
            // Actualizar producción
            products.parfait.liters = parseFloat(document.getElementById('parfait-liters').value);
            products.mango.liters = parseFloat(document.getElementById('mango-liters').value);
            products.bebible.liters = parseFloat(document.getElementById('bebible-liters').value);
            products.paletas.liters = parseFloat(document.getElementById('paletas-liters').value);
            products.barritas.liters = parseFloat(document.getElementById('barritas-liters').value);
            
            // Actualizar porcentaje de bebible saborizado
            products.bebible.flavoredPercentage = parseFloat(document.getElementById('bebible-flavored').value);
            
            // Recalcular todo
            updateUI();
        });
        
        // Tabs functionality
        document.querySelectorAll('.tab').forEach(tab => {
            tab.addEventListener('click', function() {
                // Remove active class from all tabs
                document.querySelectorAll('.tab').forEach(t => {
                    t.classList.remove('active');
                });
                
                // Add active class to clicked tab
                this.classList.add('active');
                
                // Hide all tab panes
                document.querySelectorAll('.tab-pane').forEach(pane => {
                    pane.classList.remove('active');
                });
                
                // Show corresponding pane
                const tabId = this.getAttribute('data-tab');
                document.getElementById(tabId).classList.add('active');
            });
        });
        
        // Initialize with default values
        updateUI();
    </script>
	    <script>
        // Datos iniciales
        const products = {
            parfait: {
                name: "Parfait",
                price: 9.00,
                yogurtPerUnit: 0.25, // litros
                otherCosts: {
                    granola: 0.60,
                    fruit: 0.80,
                    misc: 0.10
                },
                packageCosts: {
                    "7oz": 0.50,
                    "10oz": 0.65,
                    "12oz": 0.80
                }
            },
            bebible: {
                name: "Yogurt Bebible",
                price: 8.00,
                yogurtPerUnit: 0.25, // litros
                otherCosts: {
                    fruit: 0.30,
                    sweetener: 0.05,
                    label: 0.15
                },
                packageCosts: {
                    "7oz": 0.55,
                    "10oz": 0.70,
                    "12oz": 0.85
                }
            },
            paletas: {
                name: "Paletas",
                price: 3.50,
                yogurtPerUnit: 0.10, // litros
                otherCosts: {
                    mold: 0.30,
                    fruit: 0.15,
                    electricity: 0.15
                }
            },
            barritas: {
                name: "Barritas",
                price: 3.50,
                yogurtPerUnit: 0.083, // litros
                otherCosts: {
                    ingredients: 0.45,
                    chocolate: 0.20,
                    wrapper: 0.20
                }
            }
        };
        
        // Inicializar gráficos
        let incomeChart, profitChart;
        
        // Función para inicializar gráficos
        function initCharts() {
            const incomeCtx = document.getElementById('income-chart').getContext('2d');
            incomeChart = new Chart(incomeCtx, {
                type: 'pie',
                data: {
                    labels: ['Parfait', 'Yogurt Bebible', 'Paletas', 'Barritas'],
                    datasets: [{
                        data: [180, 160, 105, 126],
                        backgroundColor: ['#4a6cf7', '#6a11cb', '#10b981', '#f59e0b'],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });
            
            const profitCtx = document.getElementById('profit-chart').getContext('2d');
            profitChart = new Chart(profitCtx, {
                type: 'bar',
                data: {
                    labels: ['Parfait', 'Yogurt Bebible', 'Paletas', 'Barritas'],
                    datasets: [{
                        label: 'Ganancia por Producto (S/)',
                        data: [98, 98, 63, 71.28],
                        backgroundColor: '#10b981',
                        borderWidth: 0,
                        borderRadius: 5
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: {
                                drawBorder: false
                            }
                        },
                        x: {
                            grid: {
                                display: false
                            }
                        }
                    }
                }
            });
        }
        
        // Función para calcular rentabilidad
        function calculateProfitability() {
            // Obtener valores de entrada
            const yogurtCost = parseFloat(document.getElementById('yogurt-cost').value);
            const weeklyProduction = parseFloat(document.getElementById('weekly-production').value);
            
            // Obtener distribución de producción
            const parfaitLiters = parseFloat(document.getElementById('parfait-liters').value);
            const bebibleLiters = parseFloat(document.getElementById('bebible-liters').value);
            const paletasLiters = parseFloat(document.getElementById('paletas-liters').value);
            const barritasLiters = parseFloat(document.getElementById('barritas-liters').value);
            
            // Verificar que la suma no exceda la producción semanal
            const totalLiters = parfaitLiters + bebibleLiters + paletasLiters + barritasLiters;
            if (totalLiters > weeklyProduction) {
                alert("La suma de litros por producto excede la producción semanal total. Ajusta los valores.");
                return;
            }
            
            // Obtener selección de envases
            const parfaitPackage = document.querySelector('input[name="parfait-package"]:checked').value;
            const bebiblePackage = document.querySelector('input[name="bebible-package"]:checked').value;
            
            // Obtener información de sabores
            const flavors = [];
            let totalPercentage = 0;
            document.querySelectorAll('.flavor-container').forEach(container => {
                const flavorName = container.dataset.flavor;
                const percentage = parseFloat(container.querySelector('.flavor-percentage').value);
                const cost = parseFloat(container.querySelector('.flavor-cost').value);
                
                flavors.push({
                    name: flavorName,
                    percentage: percentage,
                    cost: cost
                });
                
                totalPercentage += percentage;
            });
            
            // Verificar que los porcentajes sumen 100%
            if (totalPercentage !== 100) {
                alert(`La suma de los porcentajes de sabores es ${totalPercentage}%, debe ser 100%. Ajusta los valores.`);
                return;
            }
            
            // Calcular unidades por producto
            const parfaitUnits = Math.floor(parfaitLiters / products.parfait.yogurtPerUnit);
            const bebibleUnits = Math.floor(bebibleLiters / products.bebible.yogurtPerUnit);
            const paletasUnits = Math.floor(paletasLiters / products.paletas.yogurtPerUnit);
            const barritasUnits = Math.floor(barritasLiters / products.barritas.yogurtPerUnit);
            
            // Calcular costos e ingresos por producto
            // Parfait
            const parfaitYogurtCost = parfaitUnits * products.parfait.yogurtPerUnit * yogurtCost;
            const parfaitPackageCost = parfaitUnits * products.parfait.packageCosts[parfaitPackage];
            const parfaitOtherCosts = parfaitUnits * (products.parfait.otherCosts.granola + 
                                                    products.parfait.otherCosts.fruit + 
                                                    products.parfait.otherCosts.misc);
            const parfaitFlavorCost = parfaitUnits * (flavors.reduce((sum, flavor) => sum + (flavor.cost * flavor.percentage / 100), 0));
            const parfaitTotalCost = parfaitYogurtCost + parfaitPackageCost + parfaitOtherCosts + parfaitFlavorCost;
            const parfaitIncome = parfaitUnits * products.parfait.price;
            const parfaitProfit = parfaitIncome - parfaitTotalCost;
            
            // Yogurt Bebible
            const bebibleYogurtCost = bebibleUnits * products.bebible.yogurtPerUnit * yogurtCost;
            const bebiblePackageCost = bebibleUnits * products.bebible.packageCosts[bebiblePackage];
            const bebibleOtherCosts = bebibleUnits * (products.bebible.otherCosts.fruit + 
                                                    products.bebible.otherCosts.sweetener + 
                                                    products.bebible.otherCosts.label);
            const bebibleFlavorCost = bebibleUnits * (flavors.reduce((sum, flavor) => sum + (flavor.cost * flavor.percentage / 100), 0));
            const bebibleTotalCost = bebibleYogurtCost + bebiblePackageCost + bebibleOtherCosts + bebibleFlavorCost;
            const bebibleIncome = bebibleUnits * products.bebible.price;
            const bebibleProfit = bebibleIncome - bebibleTotalCost;
            
            // Paletas
            const paletasYogurtCost = paletasUnits * products.paletas.yogurtPerUnit * yogurtCost;
            const paletasOtherCosts = paletasUnits * (products.paletas.otherCosts.mold + 
                                                    products.paletas.otherCosts.fruit + 
                                                    products.paletas.otherCosts.electricity);
            const paletasFlavorCost = paletasUnits * (flavors.reduce((sum, flavor) => sum + (flavor.cost * flavor.percentage / 100), 0));
            const paletasTotalCost = paletasYogurtCost + paletasOtherCosts + paletasFlavorCost;
            const paletasIncome = paletasUnits * products.paletas.price;
            const paletasProfit = paletasIncome - paletasTotalCost;
            
            // Barritas
            const barritasYogurtCost = barritasUnits * products.barritas.yogurtPerUnit * yogurtCost;
            const barritasOtherCosts = barritasUnits * (products.barritas.otherCosts.ingredients + 
                                                      products.barritas.otherCosts.chocolate + 
                                                      products.barritas.otherCosts.wrapper);
            const barritasFlavorCost = barritasUnits * (flavors.reduce((sum, flavor) => sum + (flavor.cost * flavor.percentage / 100), 0));
            const barritasTotalCost = barritasYogurtCost + barritasOtherCosts + barritasFlavorCost;
            const barritasIncome = barritasUnits * products.barritas.price;
            const barritasProfit = barritasIncome - barritasTotalCost;
            
            // Totales
            const totalIncome = parfaitIncome + bebibleIncome + paletasIncome + barritasIncome;
            const totalCost = parfaitTotalCost + bebibleTotalCost + paletasTotalCost + barritasTotalCost;
            const netProfit = totalIncome - totalCost;
            const profitMargin = (netProfit / totalIncome) * 100;
            
            // Actualizar UI con resultados
            document.getElementById('total-income').textContent = `S/ ${totalIncome.toFixed(2)}`;
            document.getElementById('total-cost').textContent = `S/ ${totalCost.toFixed(2)}`;
            document.getElementById('net-profit').textContent = `S/ ${netProfit.toFixed(2)}`;
            document.getElementById('profit-margin').textContent = `${profitMargin.toFixed(2)}%`;
            
            // Actualizar datos por producto
            document.getElementById('parfait-units').textContent = parfaitUnits;
            document.getElementById('parfait-income').textContent = `S/ ${parfaitIncome.toFixed(2)}`;
            document.getElementById('parfait-cost').textContent = `S/ ${parfaitTotalCost.toFixed(2)}`;
            document.getElementById('parfait-profit').textContent = `S/ ${parfaitProfit.toFixed(2)}`;
            
            document.getElementById('bebible-units').textContent = bebibleUnits;
            document.getElementById('bebible-income').textContent = `S/ ${bebibleIncome.toFixed(2)}`;
            document.getElementById('bebible-cost').textContent = `S/ ${bebibleTotalCost.toFixed(2)}`;
            document.getElementById('bebible-profit').textContent = `S/ ${bebibleProfit.toFixed(2)}`;
            
            document.getElementById('paletas-units').textContent = paletasUnits;
            document.getElementById('paletas-income').textContent = `S/ ${paletasIncome.toFixed(2)}`;
            document.getElementById('paletas-cost').textContent = `S/ ${paletasTotalCost.toFixed(2)}`;
            document.getElementById('paletas-profit').textContent = `S/ ${paletasProfit.toFixed(2)}`;
            
            document.getElementById('barritas-units').textContent = barritasUnits;
            document.getElementById('barritas-income').textContent = `S/ ${barritasIncome.toFixed(2)}`;
            document.getElementById('barritas-cost').textContent = `S/ ${barritasTotalCost.toFixed(2)}`;
            document.getElementById('barritas-profit').textContent = `S/ ${barritasProfit.toFixed(2)}`;
            
            // Actualizar distribución de sabores
            updateFlavorDistribution(parfaitUnits, bebibleUnits, paletasUnits, barritasUnits, flavors);
            
            // Actualizar gráficos
            updateCharts(parfaitIncome, bebibleIncome, paletasIncome, barritasIncome, 
                         parfaitProfit, bebibleProfit, paletasProfit, barritasProfit);
        }
        
        // Actualizar distribución de sabores en la UI
        function updateFlavorDistribution(parfaitUnits, bebibleUnits, paletasUnits, barritasUnits, flavors) {
            const flavorContainers = document.querySelectorAll('.flavor-container');
            
            // Actualizar parfait
            const parfaitFlavors = document.querySelectorAll('.product-card:nth-child(1) .flavor-distribution')[0];
            parfaitFlavors.innerHTML = '';
            flavors.forEach(flavor => {
                const units = Math.round(parfaitUnits * flavor.percentage / 100);
                parfaitFlavors.innerHTML += `<span class="sabor-tag">${capitalizeFirstLetter(flavor.name)}: ${units} uds.</span>`;
            });
            
            // Actualizar bebible
            const bebibleFlavors = document.querySelectorAll('.product-card:nth-child(2) .flavor-distribution')[0];
            bebibleFlavors.innerHTML = '';
            flavors.forEach(flavor => {
                const units = Math.round(bebibleUnits * flavor.percentage / 100);
                bebibleFlavors.innerHTML += `<span class="sabor-tag">${capitalizeFirstLetter(flavor.name)}: ${units} uds.</span>`;
            });
            
            // Actualizar paletas
            const paletasFlavors = document.querySelectorAll('.product-card:nth-child(3) .flavor-distribution')[0];
            paletasFlavors.innerHTML = '';
            flavors.forEach(flavor => {
                const units = Math.round(paletasUnits * flavor.percentage / 100);
                paletasFlavors.innerHTML += `<span class="sabor-tag">${capitalizeFirstLetter(flavor.name)}: ${units} uds.</span>`;
            });
            
            // Actualizar barritas
            const barritasFlavors = document.querySelectorAll('.product-card:nth-child(4) .flavor-distribution')[0];
            barritasFlavors.innerHTML = '';
            flavors.forEach(flavor => {
                const units = Math.round(barritasUnits * flavor.percentage / 100);
                barritasFlavors.innerHTML += `<span class="sabor-tag">${capitalizeFirstLetter(flavor.name)}: ${units} uds.</span>`;
            });
        }
        
        // Capitalizar primera letra
        function capitalizeFirstLetter(string) {
            return string.charAt(0).toUpperCase() + string.slice(1);
        }
        
        // Actualizar gráficos
        function updateCharts(parfaitIncome, bebibleIncome, paletasIncome, barritasIncome, 
                             parfaitProfit, bebibleProfit, paletasProfit, barritasProfit) {
            incomeChart.data.datasets[0].data = [parfaitIncome, bebibleIncome, paletasIncome, barritasIncome];
            incomeChart.update();
            
            profitChart.data.datasets[0].data = [parfaitProfit, bebibleProfit, paletasProfit, barritasProfit];
            profitChart.update();
        }
        
        // Inicializar pestañas
        function initTabs() {
            const tabs = document.querySelectorAll('.tab');
            const tabPanes = document.querySelectorAll('.tab-pane');
            
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    const tabId = tab.getAttribute('data-tab');
                    
                    // Desactivar todas las pestañas
                    tabs.forEach(t => t.classList.remove('active'));
                    tabPanes.forEach(p => p.classList.remove('active'));
                    
                    // Activar la pestaña seleccionada
                    tab.classList.add('active');
                    document.getElementById(tabId).classList.add('active');
                });
            });
        }
        
        // Añadir funcionalidad para agregar sabores
        function initFlavorControls() {
            const addFlavorBtn = document.getElementById('add-flavor');
            const flavorsContainer = document.getElementById('flavors-container');
            
            addFlavorBtn.addEventListener('click', () => {
                const flavorName = prompt("Ingresa el nombre del nuevo sabor:");
                if (flavorName) {
                    const normalizedFlavor = flavorName.toLowerCase().replace(/\s+/g, '-');
                    
                    const flavorHtml = `
                        <div class="flavor-container" data-flavor="${normalizedFlavor}">
                            <div class="flavor-header">
                                <h4>${capitalizeFirstLetter(flavorName)}</h4>
                                <button class="btn-secondary remove-flavor" style="padding: 5px 10px; font-size: 0.8rem;">Eliminar</button>
                            </div>
                            <div class="flavor-content">
                                <div class="input-group">
                                    <label for="${normalizedFlavor}-percentage">Distribución (%)</label>
                                    <input type="number" class="flavor-percentage" id="${normalizedFlavor}-percentage" min="0" max="100" value="0">
                                </div>
                                <div class="input-group">
                                    <label for="${normalizedFlavor}-cost">Costo extra por unidad (S/)</label>
                                    <input type="number" class="flavor-cost" id="${normalizedFlavor}-cost" step="0.01" min="0" value="0.20">
                                </div>
                            </div>
                        </div>
                    `;
                    
                    flavorsContainer.insertAdjacentHTML('beforeend', flavorHtml);
                    
                    // Añadir evento para eliminar sabor
                    const removeBtn = flavorsContainer.querySelector(`[data-flavor="${normalizedFlavor}"] .remove-flavor`);
                    removeBtn.addEventListener('click', function() {
                        this.closest('.flavor-container').remove();
                    });
                }
            });
            
            // Añadir eventos a los botones de eliminar existentes
            document.querySelectorAll('.remove-flavor').forEach(btn => {
                btn.addEventListener('click', function() {
                    this.closest('.flavor-container').remove();
                });
            });
        }
        
        // Inicializar la aplicación
        function initApp() {
            initCharts();
            initTabs();
            initFlavorControls();
            
            // Calcular rentabilidad al cargar la página
            calculateProfitability();
            
            // Añadir evento al botón de calcular
            document.getElementById('calculate-btn').addEventListener('click', calculateProfitability);
        }
        
        // Iniciar cuando el DOM esté cargado
        document.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>